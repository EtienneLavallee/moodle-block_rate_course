{"version":3,"sources":["../src/rate.js"],"names":["define","$","ajax","notification","RateAction","selector","courseid","israted","_region","_courseid","_israted","find","unbind","on","_setUserChoice","bind","_rerateCourse","prototype","element","elem","target","parent","value","data","call","methodname","args","rating","done","removeClass","addClass","text","fail","exception"],"mappings":"AAAAA,OAAM,0BAAC,CAAC,QAAD,CAAW,WAAX,CAAwB,mBAAxB,CAAD,CACN,SAASC,CAAT,CAAYC,CAAZ,CAAkBC,CAAlB,CAAgC,CAE5B,GAAIC,CAAAA,CAAU,CAAG,SAASC,CAAT,CAAmBC,CAAnB,CAA6BC,CAA7B,CAAsC,CACnD,KAAKC,OAAL,CAAeP,CAAC,CAACI,CAAD,CAAhB,CACA,KAAKI,SAAL,CAAiBH,CAAjB,CACA,KAAKI,QAAL,CAAgBH,CAAhB,CAEA,KAAKC,OAAL,CAAaG,IAAb,CAAkB,OAAlB,EAA2BC,MAA3B,GAAoCC,EAApC,CAAuC,OAAvC,CAAgD,KAAhD,CAAuD,KAAKC,cAAL,CAAoBC,IAApB,CAAyB,IAAzB,CAAvD,EACA,KAAKP,OAAL,CAAaG,IAAb,CAAkB,2BAAlB,EAA+CE,EAA/C,CAAkD,OAAlD,CAA2D,KAAKG,aAAL,CAAmBD,IAAnB,CAAwB,IAAxB,CAA3D,CACH,CAPD,CASAX,CAAU,CAACa,SAAX,CAAqBH,cAArB,CAAsC,SAASI,CAAT,CAAkB,IAChDC,CAAAA,CAAI,CAAGlB,CAAC,CAACiB,CAAO,CAACE,MAAT,CAAD,CAAkBC,MAAlB,EADyC,CAEhDC,CAAK,CAAGH,CAAI,CAACI,IAAL,CAAU,OAAV,CAFwC,CAIpD,GAAa,EAAT,EAAAD,CAAJ,CAAiB,CACbpB,CAAI,CAACsB,IAAL,CAAU,CAAC,CACPC,UAAU,CAAE,8BADL,CAEPC,IAAI,CAAE,CACFpB,QAAQ,CAAE,KAAKG,SADb,CAEFkB,MAAM,CAAEL,CAFN,CAFC,CAMPM,IAAI,CAAE,SAASL,CAAT,CAAe,CACjB,GAAI,KAAAA,CAAJ,CAAmB,CACf,KAAKf,OAAL,CAAaG,IAAb,CAAkB,kCAAlB,EAAsDkB,WAAtD,CAAkE,QAAlE,EACA,KAAKrB,OAAL,CAAaG,IAAb,CAAkB,+BAAlB,EAAmDmB,QAAnD,CAA4D,QAA5D,EACA,KAAKtB,OAAL,CAAaG,IAAb,CAAkB,6BAAlB,EAAiDoB,IAAjD,CAAsDT,CAAtD,CACH,CACD,QACH,CAPK,CAOJP,IAPI,CAOC,IAPD,CANC,CAcPiB,IAAI,CAAE7B,CAAY,CAAC8B,SAdZ,CAAD,CAAV,CAgBH,CACJ,CAtBD,CAwBA7B,CAAU,CAACa,SAAX,CAAqBD,aAArB,CAAqC,UAAW,CAC5C,KAAKR,OAAL,CAAaG,IAAb,CAAkB,+BAAlB,EAAmDkB,WAAnD,CAA+D,QAA/D,CACH,CAFD,CAIA,MAAOzB,CAAAA,CACV,CAzCK,CAAN","sourcesContent":["define(['jquery', 'core/ajax', 'core/notification'],\nfunction($, ajax, notification) {\n\n    var RateAction = function(selector, courseid, israted) {\n        this._region = $(selector);\n        this._courseid = courseid;\n        this._israted = israted;\n\n        this._region.find('.star').unbind().on('click', 'img', this._setUserChoice.bind(this));\n        this._region.find('#block_rate_course-rerate').on('click', this._rerateCourse.bind(this));\n    };\n\n    RateAction.prototype._setUserChoice = function(element) {\n        var elem = $(element.target).parent();\n        var value = elem.data('value');\n\n        if (value != '') {\n            ajax.call([{\n                methodname: 'block_rate_course_set_rating',\n                args: {\n                    courseid: this._courseid,\n                    rating: value\n                },\n                done: function(data) {\n                    if (data === true) {\n                        this._region.find('#block_rate_course-myrating-area').removeClass('hidden');\n                        this._region.find('#block_rate_course-stars-area').addClass('hidden');\n                        this._region.find('#block_rate_course-myrating').text(value);\n                    }\n                    return true;\n                }.bind(this),\n                fail: notification.exception\n            }]);\n        }\n    };\n\n    RateAction.prototype._rerateCourse = function() {\n        this._region.find('#block_rate_course-stars-area').removeClass('hidden');\n    };\n\n    return RateAction;\n});"],"file":"rate.min.js"}